<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <title>메일 쓰기</title>
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css"
      rel="stylesheet"
    />
    <style>
      body {
        font-family: "Noto Sans KR", sans-serif;
        margin: 0;
      }

      /* ===== 팝업 레이아웃 ===== */
      .popup-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.5);
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 999;
      }

      .popup {
        background: #fff;
        width: 900px;
        max-height: 90vh;
        border-radius: 8px;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
        display: flex;
        flex-direction: column;
        overflow: hidden;
      }

      .popup-header {
        background: #1e3a8a;
        color: #fff;
        padding: 12px;
        font-weight: bold;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .popup-header button {
        background: transparent;
        border: none;
        color: #fff;
        font-size: 18px;
        cursor: pointer;
      }

      .popup-body {
        padding: 20px;
        overflow-y: auto;
        flex: 1;
      }

      .form-group {
        margin-bottom: 15px;
      }

      .form-label {
        display: block;
        font-weight: 600;
        margin-bottom: 6px;
      }

      /* 받는 사람 */
      .receiver-box {
        display: flex;
        align-items: flex-start;
        gap: 10px;
      }

      .receiver-list {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 6px;
        flex: 1;
        min-height: 40px;
        padding: 6px;
        border: 1px solid #ccc;
        border-radius: 6px;
        background: #fafafa;
      }

      .receiver-tag {
        background: #1e3a8a;
        color: #fff;
        padding: 4px 8px;
        border-radius: 4px;
        display: flex;
        align-items: center;
        justify-content: space-between;
        font-size: 13px;
      }

      .receiver-tag button {
        background: transparent;
        border: none;
        color: #fff;
        cursor: pointer;
      }

      .address-book-btn {
        padding: 6px 12px;
        border: none;
        border-radius: 4px;
        background: #3498db;
        color: #fff;
        cursor: pointer;
      }

      /* 제목 */
      .title-box {
        display: flex;
        gap: 10px;
      }

      .title-box input,
      .title-box select {
        flex: 1;
        padding: 6px;
        border: 1px solid #ccc;
        border-radius: 4px;
      }

      /* 파일첨부 */
      .file-drop-area {
        border: 2px dashed #ccc;
        padding: 20px;
        text-align: center;
        border-radius: 6px;
        background: #fafafa;
        cursor: pointer;
      }

      /* 에디터 */
      .editor-toolbar {
        border: 1px solid #ccc;
        border-bottom: none;
        padding: 6px;
        background: #f1f1f1;
      }

      .editor-toolbar button,
      .editor-toolbar select {
        margin-right: 6px;
        padding: 4px 8px;
        cursor: pointer;
      }

      .editor {
        min-height: 300px;
        border: 1px solid #ccc;
        border-radius: 0 0 6px 6px;
        padding: 10px;
        outline: none;
      }

      .btn-submit {
        margin-top: 15px;
        background: #1e3a8a;
        color: #fff;
        padding: 10px 20px;
        border: none;
        border-radius: 6px;
        cursor: pointer;
        font-size: 15px;
      }
    </style>
  </head>
  <body>
    <div id="global-menu" class="mneuu" data-src="menu.html"></div>
    <!-- 메일쓰기 팝업 -->
    <div class="popup-overlay" id="mailPopup">
      <div class="popup">
        <div class="popup-header">
          메일 쓰기
          <button onclick="closePopup()">&times;</button>
        </div>
        <div class="popup-body">
          <!-- 받는사람 -->
          <div class="form-group">
            <label class="form-label">받는사람</label>
            <div class="receiver-box">
              <div id="receiverList" class="receiver-list"></div>
              <input
                type="text"
                id="receiverInput"
                placeholder="이메일 입력 후 Enter"
              />
              <button
                type="button"
                class="address-book-btn"
                onclick="openAddressBook()"
              >
                <i class="fa-solid fa-book"></i> 주소록
              </button>
            </div>
          </div>

          <!-- 제목 -->
          <div class="form-group">
            <label class="form-label">제목</label>
            <div class="title-box">
              <input type="text" placeholder="제목 입력" />
              <select>
                <option value="">템플릿 선택</option>
                <option>공지사항 안내</option>
                <option>업데이트 안내</option>
                <option>이벤트 초대</option>
              </select>
            </div>
          </div>

          <!-- 파일첨부 -->
          <div class="form-group">
            <label class="form-label">파일첨부</label>
            <div id="fileDrop" class="file-drop-area">
              파일을 끌어오거나 클릭하여 업로드하세요.
            </div>
          </div>

          <!-- 내용 -->
          <div class="form-group">
            <label class="form-label">내용</label>
            <div class="editor-toolbar">
              <select
                onchange="document.execCommand('fontSize',false,this.value)"
              >
                <option value="3">14px</option>
                <option value="4">18px</option>
                <option value="5">24px</option>
              </select>
              <button onclick="document.execCommand('bold',false,'')">
                <b>B</b>
              </button>
              <button onclick="document.execCommand('italic',false,'')">
                <i>I</i>
              </button>
              <button onclick="document.execCommand('underline',false,'')">
                <u>U</u>
              </button>
              <button
                onclick="document.execCommand('insertUnorderedList',false,'')"
              >
                <i class="fa fa-list-ul"></i>
              </button>
              <button
                onclick="document.execCommand('insertOrderedList',false,'')"
              >
                <i class="fa fa-list-ol"></i>
              </button>
              <button
                onclick="document.execCommand('createLink',false,prompt('링크 URL'))"
              >
                <i class="fa fa-link"></i>
              </button>
              <button
                onclick="document.execCommand('insertImage',false,prompt('이미지 URL'))"
              >
                <i class="fa fa-image"></i>
              </button>
            </div>
            <div class="editor" contenteditable="true">
              여기에 내용을 입력하세요...
            </div>
          </div>

          <!-- 버튼 -->
          <button class="btn-submit">메일 보내기</button>
        </div>
      </div>
    </div>

    <script>
      // 팝업 닫기
      function closePopup() {
        document.getElementById("mailPopup").style.display = "none";
      }

      // 받는 사람 추가
      const receiverInput = document.getElementById("receiverInput");
      const receiverList = document.getElementById("receiverList");

      receiverInput.addEventListener("keydown", (e) => {
        if (e.key === "Enter" && receiverInput.value.trim() !== "") {
          e.preventDefault();
          addReceiver(receiverInput.value.trim());
          receiverInput.value = "";
        }
      });

      function addReceiver(value) {
        const tag = document.createElement("div");
        tag.classList.add("receiver-tag");
        tag.innerHTML = `<span>${value}</span><button>&times;</button>`;
        tag.querySelector("button").onclick = () => tag.remove();
        receiverList.appendChild(tag);
      }

      // 파일 드래그 & 클릭 업로드
      const fileDrop = document.getElementById("fileDrop");
      fileDrop.addEventListener("dragover", (e) => {
        e.preventDefault();
        fileDrop.classList.add("dragover");
      });
      fileDrop.addEventListener("dragleave", () =>
        fileDrop.classList.remove("dragover")
      );
      fileDrop.addEventListener("drop", (e) => {
        e.preventDefault();
        fileDrop.classList.remove("dragover");
        alert(`${e.dataTransfer.files.length}개 파일 첨부됨`);
      });
      fileDrop.addEventListener("click", () => {
        const input = document.createElement("input");
        input.type = "file";
        input.multiple = true;
        input.onchange = (e) => alert(`${e.target.files.length}개 파일 선택됨`);
        input.click();
      });

      // 주소록 팝업 (샘플)
      function openAddressBook() {
        alert("주소록 팝업 열기 (별도 구현 필요)");
      }
    </script>
  </body>
</html>
