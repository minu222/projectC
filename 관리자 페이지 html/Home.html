<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8"/>
    <title>DW Academy - ê´€ë¦¬ì ë©”ì¸</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" rel="stylesheet"/>
    <style>
        /* ===== ê¸°ë³¸ ë ˆì´ì•„ì›ƒ ===== */
        body {
            margin: 0;
            font-family: "Noto Sans KR", sans-serif;
            background: #f4f6f9;
            color: #333;
            font-size: 16px;
        }

        .topbar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: #1e3a8a;
            color: #fff;
            padding: 16px 28px;
            font-size: 20px;
            font-weight: bold;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .container { display: flex; height: calc(100vh - 70px); }

        /* ===== ì‚¬ì´ë“œë°” ===== */
        .sidebar {
            width: 260px;
            background: #fff;
            border-right: 1px solid #e5e7eb;
            overflow-y: auto;
        }

        .menu, .menu ul { list-style: none; margin: 0; padding: 0; }

        .menu > li > .submenu-toggle, .menu > li > .link {
            display: flex;
            align-items: center;
            gap: 10px;
            width: 100%;
            padding: 12px 16px;
            margin: 6px 10px;
            border-radius: 8px;
            background: #1e3a8a;
            color: #fff;
            font-weight: 700;
            font-size: 16px;
            text-decoration: none;
            cursor: pointer;
            transition: background .2s, transform .2s;
        }
        .menu > li > .submenu-toggle:hover, .menu > li > .link:hover {
            background: #374eb8; transform: translateX(2px);
        }

        .submenu > li > .submenu-toggle {
            display: flex; align-items: center; gap: 8px;
            width: 100%; padding: 10px 14px; margin: 4px 14px;
            border-radius: 6px; background: #f9fafb; color: #111827;
            font-weight: 600; cursor: pointer; border: 1px solid #e5e7eb;
        }
        .submenu li ul li a {
            display: block; padding: 8px 14px; margin: 2px 14px 2px 28px;
            font-size: 13px; text-decoration: none; color: #4b5563;
            border-radius: 4px;
        }
        .submenu li ul li a:hover { background: #f3f4f6; color: #111827; }

        .submenu { height: 0; overflow: hidden; transition: height .3s ease; }
        .submenu.open { overflow: hidden; }

        /* ===== ë©”ì¸ ===== */
        .dashboard {
            flex: 1;
            padding: 32px;
            overflow-y: auto;
        }

        /* ğŸ“Š í†µê³„ ì¹´ë“œ */
        .stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 28px;
            margin-bottom: 40px;
        }
        .card {
            background: #fff;
            border-radius: 16px;
            padding: 36px;
            text-align: center;
            font-size: 26px;
            font-weight: bold;
            box-shadow: 0 3px 10px rgba(0,0,0,0.08);
        }
        .card span {
            display: block;
            margin-top: 12px;
            font-size: 18px;
            font-weight: normal;
            color: #6b7280;
        }
        .card:nth-child(1) { border-top: 5px solid #3b82f6; }
        .card:nth-child(2) { border-top: 5px solid #10b981; }
        .card:nth-child(3) { border-top: 5px solid #f59e0b; }
        .card:nth-child(4) { border-top: 5px solid #6366f1; }
        .card:nth-child(5) { border-top: 5px solid #ef4444; }
        .card:nth-child(6) { border-top: 5px solid #1e3a8a; }

        /* ğŸ“¢ ì•Œë¦¼ */
        .alerts {
            background: #fff; padding: 28px; border-radius: 14px;
            margin-bottom: 32px; box-shadow: 0 3px 10px rgba(0,0,0,0.05);
        }
        .alerts h3 { margin: 0 0 16px; font-size: 20px; color: #1e3a8a; }

        /* ğŸ” ê²€ìƒ‰ ë°•ìŠ¤ */
        .search-box { display: flex; gap: 14px; margin-bottom: 24px; }
        .search-box input, .search-box select {
            padding: 12px; border: 1px solid #d1d5db; border-radius: 8px; font-size: 15px; flex: 1;
        }
        .search-box button {
            padding: 12px 24px; border: none; border-radius: 8px;
            background: #2563eb; color: #fff; font-weight: bold; cursor: pointer;
        }
        .search-box button:hover { background: #1d4ed8; }

        /* ğŸ“‹ í…Œì´ë¸” */
        .data-table {
            width: 100%; border-collapse: collapse; background: #fff;
            border-radius: 14px; overflow: hidden; margin-bottom: 32px;
            box-shadow: 0 2px 6px rgba(0,0,0,0.05);
        }
        .data-table th, .data-table td { padding: 16px; text-align: center; font-size: 15px; }
        .data-table th { background: #f1f5f9; font-weight: 600; color: #374151; }
        .data-table tr:nth-child(even) { background: #f9fafb; }
        .data-table tr:hover { background: #eef2ff; }

        .badge { padding: 5px 12px; border-radius: 12px; font-size: 13px; font-weight: bold; color: #fff; }
        .badge.normal { background: #3b82f6; }
        .badge.cancel { background: #ef4444; }
        .badge.done { background: #10b981; }

        /* ğŸ’° ë§¤ì¶œ ë¦¬í¬íŠ¸ */
        .sales-report {
            background: #fff; border-radius: 14px; padding: 28px; margin-top: 28px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.05);
        }
        .sales-report h3 { margin-bottom: 20px; font-size: 20px; color: #1e3a8a; }
        .chart-container { position: relative; width: 100%; max-width: 1800px; height: 500px; margin: 0 auto; }
    </style>
</head>
<body>
<header class="topbar">
    <div>DW Academy</div>
    <div class="welcome" th:text="${adminName} + 'ë‹˜ í™˜ì˜í•©ë‹ˆë‹¤'">ìš´ì˜ìë‹˜ í™˜ì˜í•©ë‹ˆë‹¤ ğŸ‘‹</div>
</header>

<div class="container">
    <!-- ğŸ“‚ ì‚¬ì´ë“œë°” -->
    <aside class="sidebar">
        <ul class="menu">
            <li><a class="link" th:href="@{/dashboard}"><i class="fa-solid fa-house"></i> í™ˆ</a></li>
            <li>
                <span class="submenu-toggle"><i class="fas fa-users"></i> íšŒì› ì •ë³´</span>
                <ul class="submenu">
                    <li>
                        <span class="submenu-toggle"><i class="fas fa-user-cog"></i> íšŒì› ê´€ë¦¬</span>
                        <ul class="submenu">
                            <li><a th:href="@{/teachers}"><i class="fas fa-chalkboard-teacher"></i> ê°•ì‚¬ ì •ë³´</a></li>
                            <li><a th:href="@{/students}"><i class="fas fa-user-graduate"></i> í•™ìƒ ì •ë³´</a></li>
                            <li><a th:href="@{/members/trash}"><i class="fas fa-trash-alt"></i> ì •ë³´ íœ´ì§€í†µ</a></li>
                        </ul>
                    </li>
                    <li>
                        <span class="submenu-toggle"><i class="fas fa-paper-plane"></i> ë°œì†¡ ê´€ë¦¬</span>
                        <ul class="submenu">
                            <li><a th:href="@{/messages/teacher/sms}"><i class="fas fa-sms"></i> ê°•ì‚¬ SMS</a></li>
                            <li><a th:href="@{/messages/student/sms}"><i class="fas fa-sms"></i> íšŒì› SMS</a></li>
                            <li><a th:href="@{/messages/teacher/note}"><i class="fas fa-envelope"></i> ê°•ì‚¬ ìª½ì§€</a></li>
                            <li><a th:href="@{/messages/student/note}"><i class="fas fa-envelope"></i> íšŒì› ìª½ì§€</a></li>
                        </ul>
                    </li>
                </ul>
            </li>
            <!-- êµìœ¡ê³¼ì • -->
            <li>
                <span class="submenu-toggle"><i class="fas fa-book-open"></i> êµìœ¡ê³¼ì •</span>
                <ul class="submenu">
                    <li>
                        <span class="submenu-toggle"><i class="fas fa-layer-group"></i> êµìœ¡ ì¹´í…Œê³ ë¦¬</span>
                        <ul class="submenu">
                            <li><a th:href="@{/classroom/new}"><i class="fas fa-plus-square"></i> ê°•ì˜ì‹¤ ë“±ë¡</a></li>
                            <li><a th:href="@{/classroom/edit}"><i class="fas fa-edit"></i> ê°•ì˜ì‹¤ ìˆ˜ì •</a></li>
                            <li><a th:href="@{/classroom/delete}"><i class="fas fa-trash"></i> ê°•ì˜ì‹¤ ì‚­ì œ</a></li>
                            <li><a th:href="@{/classroom/students}"><i class="fas fa-users"></i> ê°•ì˜ì‹¤ í•™ìƒ ì •ë³´</a></li>
                            <li><a th:href="@{/materials}"><i class="fas fa-folder-open"></i> ìˆ˜ì—… ìë£Œ ê´€ë¦¬</a></li>
                            <li><a th:href="@{/exams}"><i class="fas fa-file-alt"></i> ì‹œí—˜ ë¬¸ì œ ê´€ë¦¬</a></li>
                            <li><a th:href="@{/attendance}"><i class="fas fa-calendar-check"></i> ì¶œì„ ê´€ë¦¬</a></li>
                        </ul>
                    </li>
                </ul>
            </li>
            <!-- ê²°ì œ ê´€ë¦¬ -->
            <li>
                <span class="submenu-toggle"><i class="fas fa-credit-card"></i> ê²°ì œ ê´€ë¦¬</span>
                <ul class="submenu">
                    <li>
                        <span class="submenu-toggle"><i class="fas fa-shopping-cart"></i> ì£¼ë¬¸ê²°ì œ ê´€ë¦¬</span>
                        <ul class="submenu">
                            <li><a th:href="@{/orders}"><i class="fas fa-list"></i> ì£¼ë¬¸ ëª©ë¡</a></li>
                            <li><a th:href="@{/payments/manage}"><i class="fas fa-money-check-alt"></i> ê²°ì œ ê´€ë¦¬</a></li>
                            <li><a th:href="@{/coupons}"><i class="fas fa-ticket-alt"></i> ì¿ í° ê´€ë¦¬</a></li>
                        </ul>
                    </li>
                </ul>
            </li>
            <!-- ë§¤ì¶œ ê´€ë¦¬ -->
            <li>
                <span class="submenu-toggle"><i class="fas fa-chart-line"></i> ë§¤ì¶œ ê´€ë¦¬</span>
                <ul class="submenu">
                    <li>
                        <span class="submenu-toggle"><i class="fas fa-chart-pie"></i> ë§¤ì¶œ í†µê³„</span>
                        <ul class="submenu">
                            <li><a th:href="@{/sales/year}"><i class="fas fa-calendar"></i> ì—°ë³„ ë§¤ì¶œ í†µê³„</a></li>
                            <li><a th:href="@{/sales/month}"><i class="fas fa-calendar-alt"></i> ì›”ë³„ ë§¤ì¶œ í†µê³„</a></li>
                            <li><a th:href="@{/sales/course}"><i class="fas fa-chalkboard"></i> ê³¼ì • ë§¤ì¶œ í†µê³„</a></li>
                            <li><a th:href="@{/sales/tax}"><i class="fas fa-file-invoice-dollar"></i> ì„¸ê¸ˆ ê´€ë¦¬</a></li>
                        </ul>
                    </li>
                </ul>
            </li>
        </ul>
    </aside>

    <!-- ğŸ“‚ ë©”ì¸ ëŒ€ì‹œë³´ë“œ -->
    <main class="dashboard">
        <!-- ğŸ“Š í†µê³„ ì¹´ë“œ -->
        <div class="stats">
            <div class="card" th:text="${studentCount} + 'ëª…'">120ëª…<span>ì´ íšŒì›(í•™ìƒ)</span></div>
            <div class="card" th:text="${teacherCount} + 'ëª…'">35ëª…<span>ì´ ê°•ì‚¬</span></div>
            <div class="card" th:text="${courseCount} + 'ê°œ'">25ê°œ<span>ê°œì„¤ ê³¼ì •</span></div>
            <div class="card" th:text="${avgCompletion} + '%'">85%<span>í‰ê·  ìˆ˜ë£Œìœ¨</span></div>
            <div class="card" th:text="${cancelRate} + '%'">12%<span>ìˆ˜ê°• ì·¨ì†Œìœ¨</span></div>
            <div class="card" th:text="'â‚©' + ${monthRevenue}">â‚©12,530,000<span>ì´ë²ˆ ë‹¬ ë§¤ì¶œ</span></div>
        </div>

        <!-- ğŸ“¢ ì•Œë¦¼ -->
        <div class="alerts">
            <h3>ğŸ“¢ ìµœê·¼ ì•Œë¦¼ / ì²˜ë¦¬ í•„ìš”</h3>
            <ul>
                <li th:each="notice : ${notices}" th:text="${notice}">ê°•ì‚¬ ê¹€ë¯¼ìˆ˜ ê°•ì˜ìë£Œ ì—…ë¡œë“œ ìš”ì²­</li>
            </ul>
        </div>

        <!-- ğŸ” ê²€ìƒ‰ + í…Œì´ë¸” -->
        <div class="search-box">
            <input placeholder="ê³¼ì •ëª… ê²€ìƒ‰" type="text">
            <input placeholder="ì˜ˆ: 2025/01" type="text">
            <select>
                <option>ì „ì²´</option>
                <option>ì •ìƒ</option>
                <option>ìˆ˜ê°•ì·¨ì†Œ</option>
                <option>ìˆ˜ë£Œ</option>
            </select>
            <button>ê²€ìƒ‰</button>
        </div>

        <table class="data-table">
            <thead>
            <tr>
                <th>NO</th>
                <th>ë…„ë„/ì°¨ìˆ˜</th>
                <th>ê³¼ì •ëª…</th>
                <th>ì†Œì†</th>
                <th>ìˆ˜ê°•ìƒ</th>
                <th>ì§„ë„ìœ¨</th>
                <th>ìƒíƒœ</th>
            </tr>
            </thead>
            <tbody>
            <tr>
                <td>1</td>
                <td>2025/01</td>
                <td>ìŠ¤ë§ˆíŠ¸í…ŒìŠ¤íŠ¸</td>
                <td>(ì£¼)ìœ„ëŸ°ì†Œí”„íŠ¸</td>
                <td>í™ê¸¸ë™</td>
                <td>90%</td>
                <td><span class="badge normal">ì •ìƒ</span></td>
            </tr>
            <tr>
                <td>2</td>
                <td>2024/33</td>
                <td>ì¸í„°ë„·í™œìš©</td>
                <td>(ì£¼)ìœ„ëŸ°ì†Œí”„íŠ¸</td>
                <td>ì´ì˜í¬</td>
                <td>75%</td>
                <td><span class="badge cancel">ìˆ˜ê°•ì·¨ì†Œ</span></td>
            </tr>
            <tr>
                <td>3</td>
                <td>2024/20</td>
                <td>ì—‘ì…€í™œìš©</td>
                <td>(ì£¼)ìœ„ëŸ°ì†Œí”„íŠ¸</td>
                <td>ê¹€ë¯¼ìˆ˜</td>
                <td>100%</td>
                <td><span class="badge done">ìˆ˜ë£Œ</span></td>
            </tr>
            </tbody>
        </table>

        <!-- ğŸ’° ë§¤ì¶œ ë¦¬í¬íŠ¸ -->
        <div class="sales-report">
            <h3>ğŸ’° ì´ë²ˆ ë‹¬ ë§¤ì¶œ ë¦¬í¬íŠ¸</h3>
            <div class="chart-container">
                <canvas id="salesChart"></canvas>
            </div>
        </div>
    </main>
</div>

<script>
    // ì„œë¸Œë©”ë‰´ ì ‘ê¸°/í¼ì¹˜ê¸°
    document.querySelectorAll('.submenu-toggle').forEach(btn => {
        btn.addEventListener('click', () => {
            const submenu = btn.nextElementSibling;
            if (!submenu || !submenu.classList.contains('submenu')) return;
            const isOpen = submenu.classList.contains('open');
            if (isOpen) {
                submenu.style.height = submenu.scrollHeight + 'px';
                submenu.classList.remove('open');
                requestAnimationFrame(() => submenu.style.height = '0px');
            } else {
                submenu.classList.add('open');
                submenu.style.height = submenu.scrollHeight + 'px';
                submenu.addEventListener('transitionend', () => {
                    if (submenu.classList.contains('open')) submenu.style.height = 'auto';
                }, {once: true});
            }
        });
    });

    // ë§¤ì¶œ ì°¨íŠ¸
    const ctx = document.getElementById('salesChart').getContext('2d');
    new Chart(ctx, {
        type: 'line',
        data: {
            labels: ["1ì¼", "5ì¼", "10ì¼", "15ì¼", "20ì¼", "25ì¼", "30ì¼"],
            datasets: [{
                label: 'ì¼ë³„ ë§¤ì¶œ (â‚©)',
                data: [120000, 350000, 420000, 280000, 510000, 610000, 720000],
                borderColor: '#2563eb',
                backgroundColor: 'rgba(37, 99, 235, 0.2)',
                fill: true,
                tension: 0.3
            }]
        },
        options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: { legend: { display: false } },
            scales: {
                y: {
                    beginAtZero: true,
                    ticks: { callback: v => 'â‚©' + v.toLocaleString() }
                }
            }
        }
    });
</script>
</body>
</html>
